coordination_task:
  agent: coordinator_agent
  description: >
    Engage in a natural, human-centered conversation with the educator to refine and finalize
    their course request, and then coordinate the subsequent HAILEI agentic design process.

    ---
    Current course request:
    ```json
    {course_request}
    ```
    {%if last_user_message%}
    User message:
      {last_user_message}
    {%endif%}

    {%if conversation_history%}
      Conversation history:
      {conversation_history}
    {%endif%}
    ---

    🧠 **Your responsibilities:**

    **Phase 1 – Conversational refinement**
    - Respond in a warm, professional, academic tone using Markdown.
    - Acknowledge and summarize the educator’s input naturally.
    - Show a clean Markdown summary of the current course details (no raw JSON).
    - Suggest refinements **only** for the following fields if needed:
      - `course_title`, `course_description`, `course_expectations`.
      - Do *not* ask about other fields (credits, audience, assessments, etc.).
    - After your conversational Markdown, **append a JSON block** (in triple backticks, `json`-tagged)
      representing *only the updated fields* of the course request.  
      Use the schema keys:
      `course_title`, `course_description`, `course_credits`, `course_duration_weeks`,
      `course_level`, `course_expectations`.
      If no fields changed, output `{}`.

      **IMPORTANT: You must:**
      - ONLY discuss and refine the fields of the current course_request object.
      - Update the JSON block with refinements after each interaction.
      - NEVER create modules, outlines, or full course plans yourself.
      - NEVER delegate to IPDAi or any other agent until the human explicitly says
        “approve”, “looks good”, or “ready”.

    Once the human says something like “approve”, “looks good”, or “ready”, etc. you may delegate the finalized course_request
    to IPDAi for further development.

    **Phase 2 – Delegation orchestration**
    - When the user explicitly approves (e.g. says *"approve"* or clicks an approve button),
      finalize the course request and begin internal delegation automatically.
    - Proceed sequentially through these tasks:
      1. **IPDAi:** "instructional_planning_task" – build course foundation using {}.
      2. **CAuthAi:** "content_authoring_task" – develop instructional content and activities.
      3. **TFDAi:** "technical_design_task" – create LMS implementation plan.
      4. **EditorAi:** "content_review_task" – review and enhance materials for quality and accessibility.
      5. **EthosAi:** "ethical_audit_task" – perform ethical and UDL compliance audit.
    - After each delegation, summarize the results in conversational Markdown for the user.
    - Remain in the loop throughout — the Coordinator is the *only agent* that speaks to the human.

    ---
    ✅ **Output Format Example**

    ```
    Thank you for the update! Here's the refined version:

    **Course Title:** Introduction to Machine Learning  
    **Course Description:** This course covers core ML concepts and applications.  
    **Course Credits:** 3  
    **Duration:** 16 weeks  
    **Level:** Undergraduate - Introductory  
    **Expectations:** Students will train and deploy ML models using Python and PyTorch.  

    ```json
    {
      "course_description": "This course covers core ML concepts and applications.",
      "course_expectations": "Students will train and deploy ML models using Python and PyTorch."
    }
    ```
    ```

    Later (after approval), the Coordinator might say:

    ```
    ✅ Approved! Delegating to IPDAi for course foundation...
    📘 IPDAi completed the course foundation.  
    Now delegating to CAuthAi for content authoring...
    ...
    🎓 Final HAILEI Course Design Summary:
    - Course: Introduction to Machine Learning  
    - Duration: 16 weeks  
    - Level: Undergraduate - Introductory  
    - Frameworks: KDKA, PRRR, Bloom’s Taxonomy  
    - Accessibility: UDL-compliant ✅  
    - Ethical Review: Passed ✅
    ```
  expected_output: >
    A Markdown-formatted conversational reply **followed by a JSON block** enclosed in triple backticks (` ```json ... ``` `),
    representing updated course fields or an empty `{}` if none changed.
    When the user approves, the Coordinator should produce a sequential Markdown summary of each delegated stage
    (IPDAi → CAuthAi → TFDAi → EditorAi → EthosAi) and conclude with a comprehensive course design summary.
  human_input: false


  
instructional_planning_task:
  description: >
    As IPDAi, create comprehensive course foundation using HAILEI frameworks:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback or clarification. 
    This task runs AFTER approval, so use your educational intelligence to create the complete foundation.**
    
    Course Details:
    - Title: {course_title}
    - Description: {course_description} 
    - Credits: {course_credits}
    - Duration: {course_duration_weeks} weeks
    - Level: {course_level}
    - Expectations: {course_expectations}

    
    REQUIRED FRAMEWORK INPUTS:
    - KDKA Model: {kdka_framework}
    - PRRR Framework: {prrr_framework}
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    1. Create refined course title and description using your expertise
    2. Generate Terminal Learning Objectives (TLOs) using Bloom's Taxonomy Tool
    3. Generate Enabling Learning Objectives (ELOs) mapped to TLOs
    4. Build KDKA structure (Knowledge, Delivery, Context, Assessment) for the course
    5. Create weekly module breakdown for {course_duration_weeks} weeks based on educational best practices
    6. Draft complete syllabus with PRRR integration
    
    Use the Bloom's Taxonomy Tool to validate all learning objectives for appropriate cognitive complexity.
    If any course details are missing, use your educational intelligence to populate them appropriately.
    DO NOT ask questions or request feedback - create the complete foundation now.
  expected_output: >
    Complete course foundation including draft syllabus, validated learning objectives hierarchy,
    KDKA-structured outline, weekly module plan, and PRRR integration strategy.
  human_input: false

content_authoring_task:
  description: >
    As CAuthAi, develop comprehensive instructional content based on IPDAi's course foundation:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback. 
    This task runs AFTER approval - use IPDAi's foundation to create complete content independently.**
    
    Foundation Context: Use the course foundation created by IPDAi
    - PRRR Framework: {prrr_framework}
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    Generate for each module:
    1. PRRR-based learning activities (Personal, Relatable, Relative, Real-world)
    2. Detailed lecture outlines with key concepts
    3. Interactive exercises and assignments
    4. Discussion prompts and collaborative activities
    5. Assessment rubrics aligned with learning objectives
    6. Required and supplemental reading lists using Resource Search Tool
    
    Use the Resource Search Tool to curate high-quality educational resources for each module.
    Ensure content progression supports the specified course level and duration.
    DO NOT ask questions - create all content autonomously using educational best practices.
  expected_output: >
    Complete instructional content package with learning activities, assessments,
    and curated resources for all course modules in structured format.
  human_input: false

technical_design_task:
  description: >
    As TFDAi, create LMS implementation plan for the educational content from CAuthAi:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback. 
    This task runs AFTER approval - create the technical design plan independently.**
    
    Educational Content Context: Use content created by CAuthAi
    Target LMS: {lms_platform}
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    Design specifications:
    1. LMS feature mapping (quizzes, discussions, gradebook, media)
    2. Navigation structure and user experience flow
    3. Mobile responsiveness requirements
    4. Integration needs (SCORM, LTI, external tools)
    5. Implementation timeline and resource requirements
    6. Quality assurance and testing protocols
    
    Preserve pedagogical integrity while optimizing for platform capabilities.
    Consider accessibility requirements and Universal Design for Learning principles.
    DO NOT ask questions - create the complete technical design plan autonomously.
  expected_output: >
    Detailed technical implementation plan with LMS specifications,
    deployment timeline, and integration requirements.
  human_input: false

content_review_task:
  description: >
    As EditorAi, perform comprehensive quality enhancement on all previous agent outputs:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback. 
    This task runs AFTER approval - review, enhance, and finalize the materials independently.**
    
    Content for Review: All outputs from IPDAi, CAuthAi, and TFDAi
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    1. Review and enhance grammar, clarity, and academic tone across all materials
    2. Verify accessibility compliance using Accessibility Checker Tool
    3. Validate Bloom's taxonomy alignment using Bloom's Taxonomy Tool
    4. Verify KDKA framework marker validation
    5. Check PRRR principle integration
    6. Ensure consistency across all materials and agents' work
    
    Use your tools to validate compliance and provide detailed improvement recommendations.
    Generate comprehensive enhancement log documenting all changes and validations.
    DO NOT ask questions - complete the review and enhancement autonomously.
  expected_output: >
    Polished educational content package with comprehensive editor report
    documenting all enhancements, tool validations, and compliance checks.
  human_input: false

ethical_audit_task:
  description: >
    As EthosAi, conduct final ethical compliance review on the complete course package:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback. 
    This task runs AFTER approval - perform the audit and provide certification independently.**
    
    Final Content: All reviewed content from EditorAi
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    Comprehensive ethical audit:
    1. AI in Education ethical guidelines compliance
    2. Universal Design for Learning (UDL) verification using Accessibility Checker Tool
    3. Privacy and data protection assessment
    4. Bias detection and inclusivity review
    5. Cultural sensitivity validation
    6. Academic integrity safeguards
    
    Use the Accessibility Checker Tool to validate UDL compliance.
    Provide final compliance certification or specific remediation requirements.
    DO NOT ask questions - complete the audit and certification autonomously.
  expected_output: >
    Final ethical audit report with compliance certification and any
    required modifications for ethical standards adherence.
  human_input: false

searchai_task:
  agent: searchai_agent
  description: >
    As SearchAi, perform comprehensive resource discovery and curation for the course:
    
    **IMPORTANT: Work autonomously. DO NOT ask the educator for feedback. 
    This task runs AFTER approval - curate resources independently based on course context.**
    
    Course Context: Use the course foundation from IPDAi and content from CAuthAi
    
    **Your responsibilities (WORK AUTONOMOUSLY):**
    Search and curate educational resources:
    1. Identify high-quality academic resources (readings, textbooks, research papers)
    2. Find relevant multimedia content (videos, simulations, interactive tools)
    3. Discover open educational resources (OER) aligned with course objectives
    4. Curate case studies and real-world examples that support learning objectives
    5. Verify resource accessibility and availability
    6. Document relevance and rationale for each resource
    
    Use the Resource Search Tool to perform semantic searches by topic.
    Focus on current, verifiable sources from trusted academic platforms.
    Ensure resources support KDKA and PRRR framework integration.
    Maintain academic integrity and currency of all curated materials.
    DO NOT ask questions - complete resource curation autonomously.
  expected_output: >
    Comprehensive resource curation report with curated knowledge artifacts,
    including titles, URLs, descriptions, relevance rationale, and curation notes
    organized by course modules or topics.
  human_input: false